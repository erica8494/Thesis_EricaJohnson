names(All_data_meal)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles("total_deaths",
border.col = "black", border.alpha = .5,
style="kmeans", breaks=c(-Inf, seq(0, 6, by=2), Inf),
palette="-RdYlBu", contrast=1,
title.size="Metro population",
title.col="Growth rate (%)") +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles("total_deaths",
border.col = "black", border.alpha = .5,
style="headtails", breaks=c(-Inf, seq(0, 6, by=2), Inf),
palette="-RdYlBu", contrast=1,
title.size="Metro population",
title.col="Growth rate (%)") +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles("Deaths",
border.col = "black", border.alpha = .5,
style="headtails", breaks=c(-Inf, seq(0, 6, by=2), Inf),
palette="-RdYlBu", contrast=1,
title.size="Metro population",
title.col="Growth rate (%)") +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles("Deaths", color = "mean_normalized_visits_by_state_scaling",
border.col = "black", border.alpha = .5,
style="headtails", breaks=c(-Inf, seq(0, 6, by=2), Inf),
palette="-RdYlBu", contrast=1,
title.size="Metro population",
title.col="Growth rate (%)") +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles("Deaths",
border.col = "black", border.alpha = .5,
style="quantile", breaks=c(-Inf, seq(0, 6, by=2), Inf),
palette="-RdYlBu", contrast=1,
title.size="Metro population",
title.col="Growth rate (%)") +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles("Deaths",
border.col = "black", border.alpha = .5,
style="quantile", breaks=c(-Inf, seq(0, 6, by=2), Inf),
palette="-RdYlBu", contrast=1,
title.size="COVID Deaths") +
tm_borders() +
tm_layout(legend.outside = TRUE)
table(All_data_meal_w1$Deaths)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles("Deaths",
border.col = "black", border.alpha = .5,
breaks=c(-Inf, seq(0, 6, by=2), Inf),
palette="-RdYlBu", contrast=1,
title.size="COVID Deaths") +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles("Deaths",
border.col = "black", border.alpha = .5,
style="quantile",
palette="-RdYlBu", contrast=1,
title.size="COVID Deaths") +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "Deaths",
border.col = "black", border.alpha = .5,
style="quantile",
palette="-RdYlBu", contrast=1,
title.size="COVID Deaths") +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "Deaths", col = "mean_normalized_visits_by_state_scaling",
border.col = "black", border.alpha = .5,
style="quantile",
palette="-RdYlBu", contrast=1,
title.size="COVID Deaths") +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "Deaths", col = "mean_normalized_visits_by_state_scaling",
border.col = "black", border.alpha = .5,
style="quantile",
palette="-RdYlBu", contrast=1,
title.size="COVID Deaths") +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "Deaths", col = "mean_normalized_visits_by_state_scaling",
border.col = "black", border.alpha = .5,
style="quantile",
palette="-RdYlBu", contrast=1,
title.size="COVID Deaths",
title.col = "Mean Visits by State Scaling") +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="quantile",
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths") +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths") +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="equal",
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths") +
tm_borders() +
tm_layout(legend.outside = TRUE)
table(All_data_meal_w1$mean_normalized_visits_by_state_scaling)
min(All_data_meal_w1$mean_normalized_visits_by_state_scaling)
max(All_data_meal_w1$mean_normalized_visits_by_state_scaling)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5, scale = 0.5,
style="equal",
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths") +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5, scale = 0.75,
style="equal",
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths") +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5, scale = 0.75,
style="equal",
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=seq(100, 1900, by=100)) +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5, scale = 0.75,
style="equal",
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=seq(100, 1900, by=200)) +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="equal",
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=seq(100, 1900, by=200)) +
tm_borders() +
tm_layout(legend.outside = TRUE)
map_with_data <- base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="equal",
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=seq(100, 1900, by=200)) +
tm_borders() +
tm_layout(legend.outside = TRUE)
max(All_data_meal$mean_normalized_visits_by_state_scaling)
min(All_data_meal$mean_normalized_visits_by_state_scaling)
median(All_data_meal$mean_normalized_visits_by_state_scaling)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="equal",
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=seq(100, 2000, by=200)) +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="equal",
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=seq(100, 2000, by=200)) +
tm_borders() +
tm_layout(legend.outside = TRUE)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="equal",
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=seq(0, 2000, by=200)) +
tm_borders() +
tm_layout(legend.outside = TRUE)
size_needed = c(seq(0, 2000, by=200), 2500, 3000, 3500, 4000, 4500, 5000, 5250)
median(All_data_meal$Deaths)
min(All_data_meal$Deaths)
max(All_data_meal$Deaths)
quantile(All_data_meal$Deaths)
base_map +
tm_shape(All_data_meal_w1) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="equal",
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=seq(0, 2000, by=200)) +
tm_borders() +
tm_layout(legend.outside = TRUE)
table(All_data_meal$Deaths)
median(All_data_meal$Deaths)
min(All_data_meal$Deaths)
max(All_data_meal$Deaths)
quantile(All_data_meal$Deaths)
color_needed = c(0, 500, 1000, 1500, 2000, 2500, 4500, 6500, 8500, 10000,
13000, 16000, 19000, 22000, 25000,50000, 75000, 100000,
500000, 1000000)
median(All_data_meal$mean_normalized_visits_by_state_scaling)
min(All_data_meal$mean_normalized_visits_by_state_scaling)
max(All_data_meal$mean_normalized_visits_by_state_scaling)
names(All_data)
median(All_data_meal$mean_normalized_visits_by_total_visitors)
min(All_data_meal$mean_normalized_visits_by_total_visitors)
max(All_data_meal$mean_normalized_visits_by_total_visitors)
quantile(All_data_meal$mean_normalized_visits_by_total_visitors)
median(All_data_meal$mean_normalized_visits_by_total_visits)
min(All_data_meal$mean_normalized_visits_by_total_visits)
max(All_data_meal$mean_normalized_visits_by_total_visits)
quantile(All_data_meal$mean_normalized_visits_by_total_visits)
median(All_data_meal$mean_normalized_visits_by_region_naics_visits)
min(All_data_meal$mean_normalized_visits_by_region_naics_visits)
max(All_data_meal$mean_normalized_visits_by_region_naics_visits)
quantile(All_data_meal$mean_normalized_visits_by_region_naics_visits)
median(All_data_meal$mean_normalized_visits_by_state_scaling)
min(All_data_meal$mean_normalized_visits_by_state_scaling)
max(All_data_meal$mean_normalized_visits_by_state_scaling)
quantile(All_data_meal$mean_normalized_visits_by_state_scaling)
# removing un-need variables from graphing data
names(All_data_meal)
meal_graphing = All_data_meal %>% dplyr::select("week","mean_normalized_visits_by_state_scaling",
"Deaths", "geom")
st_geometry(meal_graphing) <- meal_graphing$geom
View(meal_graphing)
base_map +
tm_shape(meal_graphing) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="fixed", breaks = color_needed,
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=size_needed,
group = "week") +
tm_borders() +
tm_layout(legend.outside = TRUE) +
transition_time(week) +
ggtitle('Week: {frame_time}',
subtitle = 'Frame {frame} of {nframes}')
base_map +
tm_shape(meal_graphing) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="fixed", breaks = color_needed,
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=size_needed,
group = "week") +
tm_borders() +
tm_layout(legend.outside = TRUE)
map_with_data <- base_map +
tm_shape(meal_graphing) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="fixed", breaks = color_needed,
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=size_needed,
group = "week") +
tm_borders() +
tm_layout(legend.outside = TRUE) +
tm_facets(by = "week", free.coords = F) +
tm_layout(panel.show = FALSE, frame = FALSE)
tmap_animation(map_with_data, filename = "Testing1.mp4",
width=1200, height = 600, fps = 2, outer.margins = 0)
pacman::p_load(tidyverse,tidycensus,tigris,sp,sf,tmap,spatstat,sparr,maptools,raster,dplyr, readxl,DCluster,spdep,SpatialEpi,
CARBayes,data.table,coda,ggplot2, xlsx,reticulate,gplots,ComplexHeatmap,
reshape2, av)
tmap_animation(map_with_data, filename = "Testing1.mp4",
width=1200, height = 600, fps = 2, outer.margins = 0)
tmap_animation(map_with_data, #filename = "Testing1.mp4",
width=1200, height = 600, fps = 2, outer.margins = 0)
# loading in packages
pacman::p_load(tidyverse,tidycensus,tigris,sp,sf,tmap,spatstat,sparr,maptools,raster,dplyr, readxl,DCluster,spdep,SpatialEpi,
CARBayes,data.table,coda,ggplot2, xlsx,reticulate,gplots,ComplexHeatmap,
reshape2, av, gifski)
tmap_animation(map_with_data, #filename = "Testing1.mp4",
width=1200, height = 600, fps = 2, outer.margins = 0)
tmap_animation(map_with_data, delay=100, outer.margins = 0)
map_with_data <- base_map +
tm_shape(meal_graphing) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="fixed", breaks = color_needed,
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=size_needed,
group = "week") +
tm_borders() +
tm_layout(legend.outside = TRUE) +
tm_facets(by = "week", free.coords = T) +
tm_layout(panel.show = FALSE, frame = FALSE)
tmap_animation(map_with_data, delay=100, outer.margins = 0)
map_with_data <- base_map +
tm_shape(meal_graphing) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="fixed", breaks = color_needed,
palette="-RdYlBu", contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=size_needed) +
tm_facets(along = "week", free.coords = FALSE) +
tm_layout(legend.outside = TRUE)
tmap_animation(map_with_data, delay=100, outer.margins = 0)
map_with_data <- base_map +
tm_shape(meal_graphing) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="fixed", breaks = color_needed,
palette=paletteer_dynamic("cartography::turquoise.pal", 20),
contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=size_needed) +
tm_facets(along = "week", free.coords = FALSE) +
tm_layout(legend.outside = TRUE)
# loading in packages
pacman::p_load(tidyverse,tidycensus,tigris,sp,sf,tmap,spatstat,sparr,maptools,raster,dplyr, readxl,DCluster,spdep,SpatialEpi,
CARBayes,data.table,coda,ggplot2, xlsx,reticulate,gplots,ComplexHeatmap,
reshape2, av, gifski,  paletteer)
map_with_data <- base_map +
tm_shape(meal_graphing) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="fixed", breaks = color_needed,
palette=paletteer_dynamic("cartography::turquoise.pal", 20),
contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=size_needed) +
tm_facets(along = "week", free.coords = FALSE) +
tm_layout(legend.outside = TRUE)
tmap_animation(map_with_data, "meal_cat.gif" , delay=100, outer.margins = 0)
tmap_animation(map_with_data, "meal_cat.mp4" , delay=100, outer.margins = 0)
median(All_data_edu$mean_normalized_visits_by_state_scaling)
min(All_data_edu$mean_normalized_visits_by_state_scaling)
max(All_data_edu$mean_normalized_visits_by_state_scaling)
quantile(All_data_edu$mean_normalized_visits_by_state_scaling)
size_needed = c(seq(0, 2000, by=200), 2500, 3000, 3500, 4000, 4500, 5000, 7500, 10000, 12500)
median(All_data_edu$Deaths)
min(All_data_edu$Deaths)
max(All_data_edu$Deaths)
quantile(All_data_edu$Deaths)
edu_graphing = All_data_edu %>% dplyr::select("week","mean_normalized_visits_by_state_scaling",
"Deaths", "geom")
st_geometry(edu_graphing) <- meal_graphing$geom
View(edu_graphing)
edu_graphing = All_data_edu %>% dplyr::select("week","mean_normalized_visits_by_state_scaling",
"Deaths", "geom")
st_geometry(edu_graphing) <- edu_graphing$geom
map_with_data <- base_map +
tm_shape(edu_graphing) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="fixed", breaks = color_needed,
palette=paletteer_dynamic("cartography::turquoise.pal", 20),
contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=size_needed) +
tm_facets(along = "week", free.coords = FALSE) +
tm_layout(legend.outside = TRUE)
tmap_animation(map_with_data, "edu_cat.gif" , delay=100, outer.margins = 0)
median(All_data_trans$mean_normalized_visits_by_state_scaling)
min(All_data_trans$mean_normalized_visits_by_state_scaling)
max(All_data_trans$mean_normalized_visits_by_state_scaling)
quantile(All_data_trans$mean_normalized_visits_by_state_scaling)
size_needed = c(seq(0, 450, by=30), 500, 1000, 2000, 3000, 4000, 7500, 10000, 12500, 15000, 17500)
# removing un-need variables from graphing data
names(All_data_trans)
trans_graphing = All_data_trans %>% dplyr::select("week","mean_normalized_visits_by_state_scaling",
"Deaths", "geom")
st_geometry(trans_graphing) <- trans_graphing$geom
# making the map
map_with_data <- base_map +
tm_shape(trans_graphing) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="fixed", breaks = color_needed,
palette=paletteer_dynamic("cartography::turquoise.pal", 20),
contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=size_needed) +
tm_facets(along = "week", free.coords = FALSE) +
tm_layout(legend.outside = TRUE)
tmap_animation(map_with_data, "trans_cat.gif" , delay=100, outer.margins = 0)
median(All_data_grocery$mean_normalized_visits_by_state_scaling)
min(All_data_grocery$mean_normalized_visits_by_state_scaling)
max(All_data_grocery$mean_normalized_visits_by_state_scaling)
quantile(All_data_grocery$mean_normalized_visits_by_state_scaling)
size_needed = c(seq(0, 2600, by=200), 3000, 3500, 4000, 4500, 5000, 7500, 10000, 12500, 15000)
# removing un-need variables from graphing data
names(All_data_trans)
trans_graphing = All_data_trans %>% dplyr::select("week","mean_normalized_visits_by_state_scaling",
"Deaths", "geom")
st_geometry(trans_graphing) <- trans_graphing$geom
map_with_data <- base_map +
tm_shape(trans_graphing) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="fixed", breaks = color_needed,
palette=paletteer_dynamic("cartography::turquoise.pal", 20),
contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=size_needed) +
tm_facets(along = "week", free.coords = FALSE) +
tm_layout(legend.outside = TRUE)
tmap_animation(map_with_data, "trans_cat.gif" , delay=100, outer.margins = 0)
median(All_data_grocery$mean_normalized_visits_by_state_scaling)
min(All_data_grocery$mean_normalized_visits_by_state_scaling)
max(All_data_grocery$mean_normalized_visits_by_state_scaling)
quantile(All_data_grocery$mean_normalized_visits_by_state_scaling)
size_needed = c(seq(0, 2500, by=30), 500, 1000, 2000, 3000, 4000, 7500, 10000, 12500, 15000, 17500)
# removing un-need variables from graphing data
names(All_data_grocery)
grocery_graphing = All_data_grocery %>% dplyr::select("week","mean_normalized_visits_by_state_scaling",
"Deaths", "geom")
st_geometry(grocery_graphing) <- grocery_graphing$geom
# making the map
map_with_data <- base_map +
tm_shape(grocery_graphing) +
tm_bubbles(size = "mean_normalized_visits_by_state_scaling", col = "Deaths",
border.col = "black", border.alpha = .5,
style="fixed", breaks = color_needed,
palette=paletteer_dynamic("cartography::turquoise.pal", 20),
contrast=1,
title.size="Mean Visits by State Scaling",
title.col = "COVID Deaths",
sizes.legend=size_needed) +
tm_facets(along = "week", free.coords = FALSE) +
tm_layout(legend.outside = TRUE)
tmap_animation(map_with_data, "grocery_cat.gif" , delay=100, outer.margins = 0)
